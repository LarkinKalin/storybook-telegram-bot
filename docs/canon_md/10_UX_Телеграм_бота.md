11_–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å_Telegram-–±–æ—Ç–∞_–°–∫–∞–∑–∫–∞ (–ø–æ–Ω—è—Ç–Ω–æ –ª—é–¥—è–º)
ID: SKAZKA-TG-DOC-11
–í–µ—Ä—Å–∏—è: v1.0
–°—Ç–∞—Ç—É—Å: DRAFT
–î–∞—Ç–∞: 2026-01-19
–í–ª–∞–¥–µ–ª–µ—Ü: –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä
1) –ß—Ç–æ —ç—Ç–æ –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Telegram
–í Telegram –Ω–µ—Ç ‚Äú—ç–∫—Ä–∞–Ω–æ–≤‚Äù –∫–∞–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.
–ï—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞ –∏ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥ –Ω–∏–º–∏:
‚Ä¢	–ö–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É —á–∞—Ç–∞ (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ): —ç—Ç–æ ‚Äú–≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é‚Äù (Reply-–∫–Ω–æ–ø–∫–∏).
‚Ä¢	–ö–Ω–æ–ø–∫–∏ –ø—Ä—è–º–æ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º: —ç—Ç–æ –∫–Ω–æ–ø–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–∞–≥–∞/—ç–∫—Ä–∞–Ω–∞ (Inline-–∫–Ω–æ–ø–∫–∏).
–ë–æ—Ç –≤–µ–¥—ë—Ç –∏—Å—Ç–æ—Ä–∏—é —à–∞–≥–∞–º–∏. –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ —Ç—ã –ª–∏–±–æ –≤—ã–±–∏—Ä–∞–µ—à—å –≤–∞—Ä–∏–∞–Ω—Ç –∫–Ω–æ–ø–∫–æ–π, –ª–∏–±–æ –ø–∏—à–µ—à—å —Å–≤–æ–π –æ—Ç–≤–µ—Ç —Ç–µ–∫—Å—Ç–æ–º.
–í–∞–∂–Ω–æ: –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö (private chat). –í –≥—Ä—É–ø–ø–∞—Ö –æ–Ω –ø–æ–ø—Ä–æ—Å–∏—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –µ–º—É –≤ –ª–∏—á–∫—É.
________________________________________
2) –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (—Ç–æ, —á—Ç–æ –≤—Å–µ–≥–¥–∞ –ø–æ–¥ —Ä—É–∫–æ–π)
–≠—Ç–æ –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É —á–∞—Ç–∞ (–≤–∏–¥–Ω—ã –∫–∞–∫ ‚Äú–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞‚Äù).
–î–µ—Ä–µ–≤–æ –º–µ–Ω—é (MVP)
–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚Ä¢	‚ñ∂ –ù–∞—á–∞—Ç—å —Å–∫–∞–∑–∫—É
o	–í—ã–±–æ—Ä —Ç–µ–º—ã (—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–µ–º)
ÔÇß	–°–∫–∞–∑–∫–∞ (—à–∞–≥–∏ 1..N)
ÔÇß	A / B / C (–≤–∞—Ä–∏–∞–Ω—Ç—ã)
ÔÇß	‚úçÔ∏è –°–≤–æ–π –æ—Ç–≤–µ—Ç
ÔÇß	üìù –ü–µ—Ä–µ—Å–∫–∞–∑
ÔÇß	‚õî –ó–∞–∫–æ–Ω—á–∏—Ç—å
ÔÇß	üè† –ú–µ–Ω—é
‚Ä¢	‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
o	–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ —Ç–µ–∫—É—â–∏–π —à–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–∫–∞–∑–∫–∏
‚Ä¢	üìö –ú–æ–∏ —Å–∫–∞–∑–∫–∏
o	–ê–∫—Ç–∏–≤–Ω–∞—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
o	–ü–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–Ω—Ü–æ–≤–∫–∞
‚Ä¢	üõí –ú–∞–≥–∞–∑–∏–Ω
o	–ö—É–ø–∏—Ç—å
o	–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É
‚Ä¢	‚ùì –ü–æ–º–æ—â—å
o	–ö–∞–∫ –∏–≥—Ä–∞—Ç—å
o	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
o	FAQ
‚Ä¢	‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
o	–î–ª–∏–Ω–∞: 8 / 10 / 12 —à–∞–≥–æ–≤
o	–†–µ–∂–∏–º —á—Ç–µ–Ω–∏—è: –¥–µ—Ç—Å–∫–∏–π / –≤–∑—Ä–æ—Å–ª—ã–π
o	–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
________________________________________
3) ‚Äú‚ñ∂ –ù–∞—á–∞—Ç—å —Å–∫–∞–∑–∫—É‚Äù –∏ –≤—ã–±–æ—Ä —Ç–µ–º—ã
–ù–∞–∂–∏–º–∞–µ—à—å ‚ñ∂ –ù–∞—á–∞—Ç—å —Å–∫–∞–∑–∫—É ‚Üí –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–µ–º.
–ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –≤—ã–±–æ—Ä —Ç–µ–º—ã
‚Ä¢	–ë–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äú–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É‚Äù –∏ –∫–Ω–æ–ø–∫–∏ —Ç–µ–º –ø—Ä—è–º–æ –ø–æ–¥ —ç—Ç–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.
‚Ä¢	–¢–µ–º—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö (–µ—Å–ª–∏ —Ç–µ–º –º–Ω–æ–≥–æ). –ï—Å—Ç—å –∫–Ω–æ–ø–∫–∏ ‚Äú–≤–ø–µ—Ä—ë–¥/–Ω–∞–∑–∞–¥‚Äù –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º.
–ï—Å–ª–∏ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è —Å–∫–∞–∑–∫–∞
–ï—Å–ª–∏ —Ç—ã –ø—ã—Ç–∞–µ—à—å—Å—è –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é, –±–æ—Ç —Å–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:
‚Ä¢	‚Äú–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é —Å–∫–∞–∑–∫—É? –¢–µ–∫—É—â–∞—è –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.‚Äù
‚Ä¢	‚úÖ –î–∞ / ‚ùå –ù–µ—Ç
(–í MVP –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –Ω–æ–≤–æ–π —Å–∫–∞–∑–∫–∏ —Ç–µ–∫—É—â–∞—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –∞ –Ω–µ ‚Äú—É–¥–∞–ª—è–µ—Ç—Å—è‚Äù.)
–ï—Å–ª–∏ —Ç–µ–º–∞ ‚Äú—É—Å—Ç–∞—Ä–µ–ª–∞‚Äù
–ò–Ω–æ–≥–¥–∞ —Ç—ã –º–æ–∂–µ—à—å –Ω–∞–∂–∞—Ç—å —Å—Ç–∞—Ä—É—é –∫–Ω–æ–ø–∫—É —Ç–µ–º—ã –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
–¢–æ–≥–¥–∞ –±–æ—Ç —Å–∫–∞–∂–µ—Ç ‚Äú–¢–µ–º–∞ —É—Å—Ç–∞—Ä–µ–ª–∞‚Äù –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —Ç–µ–º.
________________________________________
4) –ò–≥—Ä–æ–≤–æ–π —à–∞–≥ (—Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ)
–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —à–∞–≥–æ–º:
–í–Ω—É—Ç—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:
‚Ä¢	–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∏–ø–∞ ‚Äú–®–∞–≥ 3/10‚Äù
‚Ä¢	–¢–µ–∫—Å—Ç —Å—Ü–µ–Ω—ã (—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç)
–ü–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º (Inline-–∫–Ω–æ–ø–∫–∏):
‚Ä¢	A / B / C (–≥–æ—Ç–æ–≤—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã)
‚Ä¢	‚úçÔ∏è –°–≤–æ–π –æ—Ç–≤–µ—Ç (–Ω–∞–ø–∏—Å–∞—Ç—å —Å–∞–º–æ–º—É)
‚Ä¢	üìù –ü–µ—Ä–µ—Å–∫–∞–∑ (–∫—Ä–∞—Ç–∫–æ –ø–µ—Ä–µ—Å–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–≥)
‚Ä¢	‚õî –ó–∞–∫–æ–Ω—á–∏—Ç—å (–∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–∫–∞–∑–∫—É)
‚Ä¢	üè† –ú–µ–Ω—é (—É–π—Ç–∏ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é, –Ω–µ —Ç–µ—Ä—è—è –ø—Ä–æ–≥—Ä–µ—Å—Å)
–ß—Ç–æ —Ç–∞–∫–æ–µ ‚Äúüè† –ú–µ–Ω—é‚Äù
–≠—Ç–æ ‚Äú–ø–∞—É–∑–∞‚Äù. –ò—Å—Ç–æ—Ä–∏—è –Ω–µ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç.
–¢—ã –º–æ–∂–µ—à—å –ø–æ—Ç–æ–º –Ω–∞–∂–∞—Ç—å ‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ —Ç–µ–∫—É—â–∏–π —à–∞–≥.
________________________________________
5) ‚Äú‚úçÔ∏è –°–≤–æ–π –æ—Ç–≤–µ—Ç‚Äù (—Ä–µ–∂–∏–º –≤–≤–æ–¥–∞)
–ï—Å–ª–∏ –Ω–∞–∂–∞—Ç—å ‚úçÔ∏è –°–≤–æ–π –æ—Ç–≤–µ—Ç:
‚Ä¢	–±–æ—Ç –ø–µ—Ä–µ–π–¥—ë—Ç –≤ —Ä–µ–∂–∏–º, –≥–¥–µ –∂–¥—ë—Ç –æ–¥–Ω–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Ç–µ–±—è.
‚Ä¢	–≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ —à–∞–≥–∞ —É–±–∏—Ä–∞—é—Ç—Å—è, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ ‚Äú–¥–≤–æ–π–Ω—ã—Ö —Ö–æ–¥–æ–≤‚Äù.
–í —Ä–µ–∂–∏–º–µ –≤–≤–æ–¥–∞ –æ–±—ã—á–Ω–æ –µ—Å—Ç—å —É–¥–æ–±–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:
‚Ä¢	‚ùå –û—Ç–º–µ–Ω–∞ (–Ω–µ –¥–µ–ª–∞—Ç—å —Ö–æ–¥ —Ç–µ–∫—Å—Ç–æ–º, –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ)
‚Ä¢	üè† –ú–µ–Ω—é
‚Ä¢	‚õî –ó–∞–∫–æ–Ω—á–∏—Ç—å
–ï—Å–ª–∏ —Ç—ã –ø–µ—Ä–µ–¥—É–º–∞–ª:
‚Ä¢	–Ω–∞–∂–º–∏ ‚ùå –û—Ç–º–µ–Ω–∞ ‚Üí –±–æ—Ç —Å–Ω–æ–≤–∞ –ø–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–≥ (–ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç –µ–≥–æ –∑–∞–Ω–æ–≤–æ).
________________________________________
6) ‚Äúüìù –ü–µ—Ä–µ—Å–∫–∞–∑‚Äù
–ü–µ—Ä–µ—Å–∫–∞–∑ –¥–µ–ª–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫—É—é –≤–µ—Ä—Å–∏—é —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Ç–µ–∫—É—â–µ–º —à–∞–≥–µ.
–ö–∞–∫ –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
‚Ä¢	–æ–±—ã—á–Ω–æ –±–æ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —à–∞–≥–∞ (–¥–æ–±–∞–≤–ª—è–µ—Ç –±–ª–æ–∫ ‚Äú–ü–µ—Ä–µ—Å–∫–∞–∑‚Äù –≤–Ω–∏–∑—É),
‚Ä¢	–µ—Å–ª–∏ Telegram –Ω–µ –¥–∞—ë—Ç –æ–±–Ω–æ–≤–∏—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π), –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–µ—Ä–µ—Å–∫–∞–∑–æ–º.
–ü—Ä–∞–≤–∏–ª–æ: –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø–µ—Ä–µ—Å–∫–∞–∑ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏—è—Ö.
________________________________________
7) ‚Äú‚õî –ó–∞–∫–æ–Ω—á–∏—Ç—å‚Äù –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
–ï—Å–ª–∏ –Ω–∞–∂–∞—Ç—å ‚õî –ó–∞–∫–æ–Ω—á–∏—Ç—å:
‚Ä¢	–±–æ—Ç –ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º:
o	‚úÖ –î–∞ / ‚ùå –ù–µ—Ç
‚Ä¢	–ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ‚Äú–≥–∞—Å–Ω—É—Ç‚Äù (—á—Ç–æ–±—ã –Ω–µ –∂–∞–ª–∏ 10 —Ä–∞–∑).
–ï—Å–ª–∏ ‚ùå –ù–µ—Ç:
‚Ä¢	–±–æ—Ç –≤–µ—Ä–Ω—ë—Ç —Ç–µ–±—è –≤ —Ç–µ–∫—É—â–∏–π —à–∞–≥ (–ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç —à–∞–≥ –∑–∞–Ω–æ–≤–æ).
________________________________________
8) ‚Äú‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å‚Äù
–≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
–û–Ω–∞ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ—Å—Ç—É—é –≤–µ—â—å:
‚Ä¢	–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —à–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–∫–∞–∑–∫–∏ (–µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å),
‚Ä¢	–∏ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º ‚Äú–∂–∏–≤—ã–º‚Äù (–∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º) —à–∞–≥–æ–º.
–ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–∫–∞–∑–∫–∏ –Ω–µ—Ç:
‚Ä¢	–±–æ—Ç –æ—Ç–∫—Ä–æ–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é.
________________________________________
9) ‚Äúüìö –ú–æ–∏ —Å–∫–∞–∑–∫–∏‚Äù
–ê–∫—Ç–∏–≤–Ω–∞—è
–ï—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è:
‚Ä¢	‚Äú–ê–∫—Ç–∏–≤–Ω–∞—è‚Äù –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–±—è –∫ –Ω–µ–π (—Ç–æ –∂–µ, —á—Ç–æ ‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å).
–ü–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–Ω—Ü–æ–≤–∫–∞
‚Ä¢	–µ—Å–ª–∏ —É —Ç–µ–±—è —É–∂–µ –±—ã–ª–∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Å–∫–∞–∑–∫–∏, –±–æ—Ç –ø–æ–∫–∞–∂–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –∫–æ–Ω—Ü–æ–≤–∫—É (—ç—Ç–æ ‚Äú–ø—Ä–æ—Å–º–æ—Ç—Ä‚Äù, –æ–Ω –Ω–µ –ª–æ–º–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∞–∫—Ç–∏–≤–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é).
‚Ä¢	–µ—Å–ª–∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Å–∫–∞–∑–æ–∫ –Ω–µ—Ç: –±–æ—Ç —Å–∫–∞–∂–µ—Ç ‚Äú–ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö‚Äù –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –Ω–∞—á–∞—Ç—å.
–ï—Å–ª–∏ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∫–æ–Ω—Ü–æ–≤–∫–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è —Å–∫–∞–∑–∫–∞, —Ç–∞–º –±—É–¥—É—Ç –∫–Ω–æ–ø–∫–∏:
‚Ä¢	‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é
‚Ä¢	üè† –ú–µ–Ω—é
‚Ä¢	‚ñ∂ –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
________________________________________
10) ‚Äúüõí –ú–∞–≥–∞–∑–∏–Ω‚Äù (MVP-—Å–∫–µ–ª–µ—Ç)
–í –º–∞–≥–∞–∑–∏–Ω–µ –º–∏–Ω–∏–º—É–º:
‚Ä¢	–ö—É–ø–∏—Ç—å: —Å–æ–∑–¥–∞—ë—Ç –æ–ø–ª–∞—Ç—É (–µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –æ–∂–∏–¥–∞—é—â–∞—è –æ–ø–ª–∞—Ç–∞, –Ω–æ–≤—É—é –Ω–µ —Å–æ–∑–¥–∞—ë—Ç, –∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç ‚Äú–ø—Ä–æ–≤–µ—Ä–∏—Ç—å‚Äù).
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ –ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —ç–∫—Ä–∞–Ω –º–∞–≥–∞–∑–∏–Ω–∞ –∏–∑-–∑–∞ Telegram-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, –æ–Ω –æ—Ç–∫—Ä–æ–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∫–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã—Ö–æ–¥.
________________________________________
11) ‚Äú‚ùì –ü–æ–º–æ—â—å‚Äù
–°–æ–¥–µ—Ä–∂–∏—Ç 3 —Ä–∞–∑–¥–µ–ª–∞:
‚Ä¢	–ö–∞–∫ –∏–≥—Ä–∞—Ç—å
‚Ä¢	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚Ä¢	FAQ
–í –∫–∞–∂–¥–æ–º —Ä–∞–∑–¥–µ–ª–µ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ ‚Äú–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É‚Äù –∏ üè† –ú–µ–Ω—é.
________________________________________
12) ‚Äú‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏‚Äù
–í MVP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Å—Ç—ã–µ:
‚Ä¢	–î–ª–∏–Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏: 8 / 10 / 12 —à–∞–≥–æ–≤
‚Ä¢	–†–µ–∂–∏–º —á—Ç–µ–Ω–∏—è: –¥–µ—Ç—Å–∫–∏–π / –≤–∑—Ä–æ—Å–ª—ã–π
‚Ä¢	–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
________________________________________
13) –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫ –∏ ‚Äú–ø–æ—á–µ–º—É –∫–Ω–æ–ø–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞‚Äù
Telegram –ª—é–±–∏—Ç –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ –Ω–∞–∂–∞—Ç–∏—è –∏ –¥—É–±–ª–∏–∫–∞—Ç—ã. –ü–æ—ç—Ç–æ–º—É –±–æ—Ç –∑–∞—â–∏—â–∞–µ—Ç—Å—è:
–ï—Å–ª–∏ —Ç—ã –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –Ω–∞ —Å—Ç–∞—Ä–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
–ë–æ—Ç –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (‚Äú–°—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Äù –∏–ª–∏ ‚Äú–°—Ç–∞—Ä—ã–π —à–∞–≥‚Äù).
–î–∞–ª—å—à–µ –æ–Ω —Å–¥–µ–ª–∞–µ—Ç –æ–¥–Ω–æ –∏–∑ –¥–≤—É—Ö:
‚Ä¢	–ª–∏–±–æ –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —à–∞–≥ (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ),
‚Ä¢	–ª–∏–±–æ –æ—Ç–∫—Ä–æ–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–∏ —Ç—ã –∂–º—ë—à—å ‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å).
–≠—Ç–æ –Ω–µ ‚Äú—Å–ª–æ–º–∞–ª–æ—Å—å‚Äù, —ç—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—É—Ç–∞–Ω–∏—Ü—ã.
–ï—Å–ª–∏ —Ç—ã –æ—Ç–ø—Ä–∞–≤–∏–ª –Ω–µ —Ç–µ–∫—Å—Ç (—Å—Ç–∏–∫–µ—Ä/–≥–æ–ª–æ—Å/—Ñ–æ—Ç–æ)
–ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç, —á—Ç–æ –¥–ª—è –∏–≥—Ä—ã –Ω—É–∂–µ–Ω —Ç–µ–∫—Å—Ç –∏–ª–∏ –∫–Ω–æ–ø–∫–∏, –∏ –≤–µ—Ä–Ω—ë—Ç –≤ –º–µ–Ω—é/—à–∞–≥ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞).
–ï—Å–ª–∏ –±–æ—Ç ‚Äú–º–æ–ª—á–∏—Ç‚Äù
–°–∞–º—ã–π –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–±:
‚Ä¢	–Ω–∞–∂–∞—Ç—å ‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å /resume.
________________________________________
14) –ö–æ–º–∞–Ω–¥—ã (–Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–ø–∞–ª–∏)
–û–±—ã—á–Ω–æ –æ–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã, –Ω–æ –ø–æ–ª–µ–∑–Ω—ã –∫–∞–∫ –∞–≤–∞—Ä–∏–π–Ω—ã–µ –≤—Ö–æ–¥—ã:
‚Ä¢	/start ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚Ä¢	/new ‚Äî –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é (–µ—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è, —Å–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
‚Ä¢	/resume ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ç–µ–∫—É—â—É—é
‚Ä¢	/help ‚Äî –ø–æ–º–æ—â—å
‚Ä¢	/shop ‚Äî –º–∞–≥–∞–∑–∏–Ω
‚Ä¢	/status ‚Äî —Ç–µ—Ö-—Å—Ç–∞—Ç—É—Å (–≤ MVP –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ø—Ä–æ—â—ë–Ω, –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ç–æ–ª—å–∫–æ –≤ DEV)
________________________________________
15) –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è ‚Äú–Ω–æ—Ä–º–∞–ª—å–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º‚Äù
‚Ä¢	–í –ª—é–±–æ–π —Ç–æ—á–∫–µ –µ—Å—Ç—å –≤—ã—Ö–æ–¥ –≤ üè† –ú–µ–Ω—é.
‚Ä¢	–ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á–µ—Ä–µ–∑ ‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å.
‚Ä¢	–°—Ç–∞—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –∏–Ω–æ–≥–¥–∞ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞, –Ω–æ –±–æ—Ç –Ω–µ –¥–∞—Å—Ç –∏–º–∏ —Å–ª–æ–º–∞—Ç—å —Å–∫–∞–∑–∫—É.
‚Ä¢	–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ: –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è.

















10_UX_–¢–µ–ª–µ–≥—Ä–∞–º_–±–æ—Ç–∞
ID: SKAZKA-TG-DOC-10
–í–µ—Ä—Å–∏—è: v1.2
–°—Ç–∞—Ç—É—Å: DRAFT
–î–∞—Ç–∞: 2026-01-19
–í–ª–∞–¥–µ–ª–µ—Ü: –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä
1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
UX-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è Telegram-–±–æ—Ç–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Å–∫–∞–∑–∫–∏ (MVP): —Å–æ—Å—Ç–æ—è–Ω–∏—è, entrypoints, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (Reply/Inline), callback-–∫–æ–Ω—Ç—Ä–∞–∫—Ç, confirm (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ + –∞—Ç–æ–º–∞—Ä–Ω–æ), recoverability, –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏/–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.
2. –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è (MVP –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
‚Ä¢	–¢–æ–ª—å–∫–æ private —á–∞—Ç—ã. –ò–Ω–∞—á–µ: ‚Äú–ü–∏—à–∏ –≤ –ª–∏—á–∫—É‚Äù –∏ —Å—Ç–æ–ø.
‚Ä¢	–ò–≥—Ä–æ–≤–æ–π –≤–≤–æ–¥ MVP: —Ç–µ–∫—Å—Ç –∏ –∫–Ω–æ–ø–∫–∏.
‚Ä¢	–ì–æ–ª–æ—Å/—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ/—Å—Ç–∏–∫–µ—Ä—ã –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ö–æ–¥–æ–º.
3. –¢–µ—Ä–º–∏–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–π
‚Ä¢	PAUSE: —É–π—Ç–∏ –≤ L1, —Å–µ—Å—Å–∏—è ACTIVE, step –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
‚Ä¢	PAUSE_CLEAN: PAUSE + —Å–Ω—è—Ç—å inline —É last_step_message_id (–µ—Å–ª–∏ –µ—Å—Ç—å).
‚Ä¢	CONTINUE: –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π —à–∞–≥ (L3) –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π ‚Äú–∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π‚Äù.
‚Ä¢	FINISH: –∑–∞–≤–µ—Ä—à–∏—Ç—å —Å —Ñ–∏–Ω–∞–ª–æ–º (status=FINISHED).
‚Ä¢	ABORT: —Å–±—Ä–æ—Å–∏—Ç—å –±–µ–∑ —Ñ–∏–Ω–∞–ª–∞ (status=ABORTED).
MVP: —Å—Ç–∞—Ä—Ç –Ω–æ–≤–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ ACTIVE = FINISH —Ç–µ–∫—É—â—É—é, –Ω–µ ABORT.
________________________________________
4. UX-–¥–∞–Ω–Ω—ã–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)
4.1. sessions (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è)
‚Ä¢	session_id: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π UUID/serial (–≤ callback –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
‚Ä¢	sid8: –ø—É–±–ª–∏—á–Ω—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π id —Å–µ—Å—Å–∏–∏ (—Å–º. 4.2)
‚Ä¢	tg_id: –≤–ª–∞–¥–µ–ª–µ—Ü —Å–µ—Å—Å–∏–∏
‚Ä¢	status: ACTIVE / FINISHED / ABORTED
‚Ä¢	step: 0..max_steps-1
‚Ä¢	max_steps: int (8/10/12)
‚Ä¢	last_step_message_id: message_id –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ ‚Äú–∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ L3‚Äù
‚Ä¢	last_step_sent_at: timestamp –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ ‚Äú–∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ L3‚Äù
‚Ä¢	theme_id: –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–µ–º–∞
4.2. sid8 (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª)
‚Ä¢	–ø–æ–ª–µ sessions.sid8
‚Ä¢	8 —Å–∏–º–≤–æ–ª–æ–≤ [a-z0-9]
‚Ä¢	–∫—Ä–∏–ø—Ç–æ—Å–ª—É—á–∞–π–Ω–æ, unique index, –ø—Ä–∏ –∫–æ–ª–ª–∏–∑–∏–∏ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚Ä¢	—Å—Ç–∞–±–∏–ª–µ–Ω –Ω–∞ –≤—Å—é –∂–∏–∑–Ω—å —Å–µ—Å—Å–∏–∏
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
‚Ä¢	–ª—é–±—É—é —Å–µ—Å—Å–∏—é –ø–æ callback –≥—Ä—É–∑–∏–º —Å—Ç—Ä–æ–≥–æ –ø–æ (tg_id, sid8). –ó–∞–ø—Ä–µ—â–µ–Ω–æ WHERE sid8=? –±–µ–∑ tg_id.
4.3. confirm_requests (L_CONFIRM)
‚Ä¢	rid8: 8 —Å–∏–º–≤–æ–ª–æ–≤ [a-z0-9], –∫—Ä–∏–ø—Ç–æ—Å–ª—É—á–∞–π–Ω–æ, unique index
‚Ä¢	tg_id
‚Ä¢	kind: finish | abort | new
‚Ä¢	status: pending | used | expired
‚Ä¢	result: yes | no | fail | null
‚Ä¢	payload: JSON
‚Ä¢	expires_at, used_at
–ü–æ–ª–∏—Ç–∏–∫–∞ expired (–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ):
‚Ä¢	expired –æ–∑–Ω–∞—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ ‚Äú–∏—Å—Ç–µ–∫–ª–æ –ø–æ TTL‚Äù.
‚Ä¢	expired —Å—Ç–∞–≤–∏—Ç—Å—è:
o	–¥–∂–æ–±–æ–π/—Ç–∞–π–º–µ—Ä–æ–º, –ò–õ–ò
o	–ª–µ–Ω–∏–≤–æ: –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ cf, –µ—Å–ª–∏ expires_at <= now –∏ status=pending ‚Üí status=expired.
‚Ä¢	prerequisites fail –ø—Ä–∏ ‚Äú–î–∞‚Äù = status=used, result=fail (–Ω–µ expired).
4.4. session_events (turn —Å–æ–±—ã—Ç–∏—è)
turn = —Ç–æ–ª—å–∫–æ choice (A/B/C) –∏–ª–∏ free_text.
rc/ft/fn/–Ω–∞–≤–∏–≥–∞—Ü–∏—è/–ø–∞–≥–∏–Ω–∞—Ü–∏—è/–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ = –Ω–µ turn.
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:
‚Ä¢	1 turn –Ω–∞ (session_id, step).
4.5. ui_events (UX-—Å–æ–±—ã—Ç–∏—è —Å –¥–µ–¥—É–ø–æ–º) (BLOCKER)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å UX-—Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä ‚Äú–ø–µ—Ä–µ—Å–∫–∞–∑ –ø–æ–∫–∞–∑–∞–Ω‚Äù) —Ç–∞–∫, —á—Ç–æ–±—ã:
‚Ä¢	–Ω–µ –±—ã–ª–æ –¥—É–±–ª–µ–π –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ —Ç–∞–ø–∞/–ø–æ–≤—Ç–æ—Ä–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –∞–ø–¥–µ–π—Ç–æ–≤,
‚Ä¢	‚Äú–ø–æ–∫–∞–∑–∞–ª–∏ –æ–¥–∏–Ω —Ä–∞–∑‚Äù —Ä–∞–±–æ—Ç–∞–ª–æ –¥–∞–∂–µ –ø–æ—Å–ª–µ CONTINUE (message_id –º–µ–Ω—è–µ—Ç—Å—è),
‚Ä¢	–Ω–µ –ø–æ—è–≤–ª—è–ª–æ—Å—å ‚Äú–£–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ‚Äù, –µ—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑–∞–ª–∏.
–ü–æ–ª—è (–º–∏–Ω–∏–º—É–º):
‚Ä¢	session_id
‚Ä¢	step
‚Ä¢	kind: recap_shown
‚Ä¢	content_hash (—Å–º. 14.3)
‚Ä¢	state: pending | shown | failed
‚Ä¢	pending_since: timestamp (–∫–æ–≥–¥–∞ –≤—ã—Å—Ç–∞–≤–∏–ª–∏ pending)
‚Ä¢	fail_count: int
‚Ä¢	next_retry_at: timestamp (nullable)
‚Ä¢	step_message_id: message_id L3, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—ã–ª –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω rc (nullable, —Å–º. 14.4)
‚Ä¢	recap_message_id: message_id –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ—Å–∫–∞–∑–∞ (nullable, –µ—Å–ª–∏ –ø—Ä–∏—à–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)
‚Ä¢	created_at
‚Ä¢	updated_at
–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è):
‚Ä¢	UNIQUE (session_id, step, kind, content_hash)
4.5.1. –î–µ–¥—É–ø-–ø—Ä–∞–≤–∏–ª–æ ‚Äúacquire‚Äù (–∞—Ç–æ–º–∞—Ä–Ω–æ, –±–µ–∑ –≥–æ–Ω–æ–∫)
–ù—É–∂–Ω–∞ –∞—Ç–æ–º–∞—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è/–º–µ—Ç–æ–¥ ui_event_acquire(...) (MVP —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ):
–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ:
1.	SELECT —Å—Ç—Ä–æ–∫—É ui_events –ø–æ –∫–ª—é—á—É (session_id, step, kind, content_hash) FOR UPDATE.
2.	–ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∏ –Ω–µ—Ç ‚Üí INSERT state=pending, pending_since=now, fail_count=0 ‚Üí COMMIT ‚Üí caller –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å.
3.	–ï—Å–ª–∏ –µ—Å—Ç—å:
o	state=shown ‚Üí COMMIT ‚Üí caller –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç (toast ‚Äú–£–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ‚Äù)
o	state=pending:
ÔÇß	–µ—Å–ª–∏ now - pending_since <= 30s ‚Üí COMMIT ‚Üí –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç (toast ‚Äú–£–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é‚Äù)
ÔÇß	–µ—Å–ª–∏ now - pending_since > 30s (stale pending) ‚Üí —Ç—Ä–∞–∫—Ç—É–µ–º –∫–∞–∫ failed:
ÔÇß	UPDATE state=failed, fail_count=fail_count+1, next_retry_at=now (–∏–ª–∏ now + 0) ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫–∞–∫ failed
o	state=failed:
ÔÇß	–µ—Å–ª–∏ next_retry_at != null –∏ now < next_retry_at ‚Üí COMMIT ‚Üí –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç (toast ‚Äú–ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ‚Äù)
ÔÇß	–∏–Ω–∞—á–µ ‚Üí UPDATE state=pending, pending_since=now ‚Üí COMMIT ‚Üí caller –ü–û–ö–ê–ó–´–í–ê–ï–¢
–í–∞–∂–Ω–æ:
‚Ä¢	–ü–æ–∫–∞–∑ (Telegram API edit/send) –¥–µ–ª–∞–µ—Ç—Å—è –í–ù–ï —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
‚Ä¢	–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç ‚Äú–¥–≤–æ–π–Ω–æ–π —Ç–∞–ø‚Äù –¥–æ pending –∏ –Ω–µ –¥–µ—Ä–∂–∏—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –Ω–∞ –≤—Ä–µ–º—è Telegram.
4.5.2. –§–∏–∫—Å–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ui_event (–ø–æ—Å–ª–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–∫–∞–∑–∞)
–ü–æ—Å–ª–µ Telegram –ø–æ–ø—ã—Ç–∫–∏:
‚Ä¢	—É—Å–ø–µ—Ö –ø–æ–∫–∞–∑–∞ ‚Üí UPDATE state=shown, step_message_id=, recap_message_id=<id recap msg –µ—Å–ª–∏ –±—ã–ª>, updated_at=now
‚Ä¢	–ø—Ä–æ–≤–∞–ª –ø–æ–∫–∞–∑–∞ ‚Üí UPDATE state=failed, fail_count=fail_count+1, next_retry_at=, updated_at=now
Backoff (–º–∏–Ω–∏–º—É–º, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ ‚Äú–º–æ–ª–æ—Ç–∏–ª–∫–∏‚Äù):
‚Ä¢	fail_count=1 ‚Üí next_retry_at = now + 10s
‚Ä¢	fail_count=2 ‚Üí next_retry_at = now + 30s
‚Ä¢	fail_count>=3 ‚Üí next_retry_at = now + 120s
–ï—Å–ª–∏ UPDATE —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–µ —É–¥–∞–ª—Å—è (DB –≤—Ä–µ–º–µ–Ω–Ω–æ):
‚Ä¢	–¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Å—Ç–∞–≤–∏—Ç—å pending, –Ω–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º rc pending —Å—Ç–∞—Ä—à–µ 30s –±—É–¥–µ—Ç ‚Äústale‚Äù –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è (—Å–º. 4.5.1).
________________________________________
5. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —à–∞–≥–æ–≤
‚Ä¢	step –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π: 0..11
‚Ä¢	UI: step+1
‚Ä¢	st2 –≤ callback: 00..11
________________________________________
6. Labels (–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –º–µ–Ω—é)
–¢–µ–∫—Å—Ç—ã ReplyKeyboard –∫–Ω–æ–ø–æ–∫ —è–≤–ª—è—é—Ç—Å—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏. –ú–µ–Ω—è—Ç—å emoji/–ø—Ä–æ–±–µ–ª—ã –∑–∞–ø—Ä–µ—â–µ–Ω–æ –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏.
________________________________________
7. UI primitives
7.1. answerCallbackQuery (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
–ù–∞ –ª—é–±–æ–π callback –≤—Å–µ–≥–¥–∞ answerCallbackQuery.
‚Ä¢	cache_time –≤—Å–µ–≥–¥–∞ = 0
‚Ä¢	—É—Å–ø–µ—Ö: –ø—É—Å—Ç–æ–π —Ç–µ–∫—Å—Ç
‚Ä¢	–æ—à–∏–±–∫–∏/—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ/—Å—Ç–∞—Ä—ã–µ: –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç (toast)
7.2. ReplyKeyboardRemove
‚Ä¢	Inline-—Å–æ—Å—Ç–æ—è–Ω–∏—è (L2, L3, L_CONFIRM, L5.*): ReplyKeyboardRemove
‚Ä¢	Reply-—Å–æ—Å—Ç–æ—è–Ω–∏—è (L1, L3_TEXT, L4): ReplyKeyboard –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
7.3. –û—Ç–∫—Ä—ã—Ç—å L1 (—Ä–µ–∞–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ)
‚Äú–û—Ç–∫—Ä—ã—Ç—å L1‚Äù –æ–∑–Ω–∞—á–∞–µ—Ç:
‚Ä¢	–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äú–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é‚Äù
‚Ä¢	–ø–æ–∫–∞–∑–∞—Ç—å ReplyKeyboard –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
Best-effort:
‚Ä¢	–µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ L1 –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ (blocked/rate-limit/chat not found) ‚Üí –ª–æ–≥ + –±–µ–∑ —Ä–µ—Ç—Ä–∞–µ–≤.
7.4. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (L1) –∏ ReplyKeyboard
ReplyKeyboard L1 (–ø—É–Ω–∫—Ç—ã, –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ –ª–µ–π–±–ª—ã):
‚Ä¢	‚ñ∂ –ù–∞—á–∞—Ç—å —Å–∫–∞–∑–∫—É
‚Ä¢	‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å ACTIVE; –∏–Ω–∞—á–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å)
‚Ä¢	üß© –ú–æ–∏ —Å–∫–∞–∑–∫–∏
‚Ä¢	üõí –ú–∞–≥–∞–∑–∏–Ω
‚Ä¢	‚ùì –ü–æ–º–æ—â—å
‚Ä¢	‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏
–í–∞–∂–Ω–æ (ReplyKeyboard = —Ç–µ–∫—Å—Ç):
‚Ä¢	–ï—Å–ª–∏ –≤—Ö–æ–¥—è—â–∏–π —Ç–µ–∫—Å—Ç —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ª–µ–π–±–ª–æ–º –∫–Ω–æ–ø–∫–∏ L1, –æ–Ω —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –Ω–∞–∂–∞—Ç–∏–µ —ç—Ç–æ–π –∫–Ω–æ–ø–∫–∏.
‚Ä¢	–õ—é–±–æ–π –∏–Ω–æ–π —Ç–µ–∫—Å—Ç –≤ L1/L2/L5 —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ ‚Äú–Ω–µ–ø–æ–Ω—è—Ç–Ω–æ‚Äù: –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É + –æ—Ç–∫—Ä—ã—Ç—å L1.
7.5. PAUSE_CLEAN
–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ L1 –∏–∑ –∏–≥—Ä–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
‚Ä¢	go:l1 –∏–∑ L3
‚Ä¢	go:l1 –∏–∑ L3_TEXT
‚Ä¢	/start (–µ—Å–ª–∏ –µ—Å—Ç—å ACTIVE)
–ï—Å–ª–∏ ACTIVE –Ω–µ—Ç –∏–ª–∏ last_step_message_id == null ‚Äî —á–∏—Å—Ç–∫—É –Ω–µ –¥–µ–ª–∞–µ–º.
7.6. CONTINUE
‚Ä¢	–µ—Å–ª–∏ last_step_message_id –µ—Å—Ç—å ‚Üí –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–Ω—è—Ç—å inline (–æ—à–∏–±–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å)
‚Ä¢	–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ L3 ‚Äú—Ç–µ–∫—É—â–∏–π —à–∞–≥‚Äù
‚Ä¢	–∑–∞–ø–∏—Å–∞—Ç—å last_step_message_id = –Ω–æ–≤—ã–π message_id
‚Ä¢	–∑–∞–ø–∏—Å–∞—Ç—å last_step_sent_at = now()
________________________________________
8. –ü—Ä–æ–ª–æ–≥
MVP: –ø—Ä–æ–ª–æ–≥ –≤—Å–µ–≥–¥–∞ –≤–Ω—É—Ç—Ä–∏ narration –ø–µ—Ä–≤–æ–≥–æ —à–∞–≥–∞ (step=0).
________________________________________
9. Callback-–∫–æ–Ω—Ç—Ä–∞–∫—Ç (–ø–æ–ª–Ω—ã–π)
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: callback_data ‚â§ 64 –±–∞–π—Ç–∞.
9.1. –ù–∞–≤–∏–≥–∞—Ü–∏—è
‚Ä¢	go:l1
‚Ä¢	go:l2:
‚Ä¢	go:my
‚Ä¢	go:shop
‚Ä¢	go:help
‚Ä¢	go:stg
9.2. –¢–µ–º—ã (L2)
‚Ä¢	t::
‚Ä¢	pg:t:
pg2:
‚Ä¢	—Å—Ç—Ä–æ–≥–æ 00..99, –º—É—Å–æ—Ä ‚Üí 00
tp:
‚Ä¢	1..16, [a-z0-9_-] —Å—Ç—Ä–æ–≥–æ (—è–≤–Ω–æ –∑–∞–ø—Ä–µ—â–µ–Ω—ã –ø—Ä–æ–±–µ–ª—ã –∏ ':')
9.3. –®–∞–≥ (L3) (inline-only)
–®–∞–≥–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ InlineKeyboard –Ω–∞ L3 —Å–æ–æ–±—â–µ–Ω–∏–∏:
‚Ä¢	ch:::<A|B|C>
‚Ä¢	ft::
‚Ä¢	rc::
‚Ä¢	fn::
9.4. Confirm
‚Ä¢	cf::y
‚Ä¢	cf::n
9.5. –ú–æ–∏ —Å–∫–∞–∑–∫–∏
‚Ä¢	my:active
‚Ä¢	my:last_end
9.6. –ú–∞–≥–∞–∑–∏–Ω
‚Ä¢	shop:buy
‚Ä¢	shop:chk
9.7. –ü–æ–º–æ—â—å
‚Ä¢	hl:list / hl:how / hl:safe / hl:faq
9.8. –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚Ä¢	st:len:8 | st:len:10 | st:len:12
‚Ä¢	st:read:kid | st:read:adult
‚Ä¢	st:reset (confirm abort)
________________________________________
10. –í–∞–ª–∏–¥–∞—Ü–∏—è callback –∏ recoverability (BLOCKER)
10.1. –û–±—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
‚Ä¢	private chat
‚Ä¢	answerCallbackQuery –≤—Å–µ–≥–¥–∞
10.2. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Å—Å–∏–∏
–î–ª—è ch/ft/rc/fn:
‚Ä¢	–≥—Ä—É–∑–∏–º —Å–µ—Å—Å–∏—é –ø–æ (tg_id, sid8)
‚Ä¢	–µ—Å–ª–∏ –Ω–µ—Ç:
o	toast ‚Äú–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏‚Äù
o	–ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–Ω—è—Ç—å inline —É —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à—ë–ª callback (best-effort)
o	–æ—Ç–∫—Ä—ã—Ç—å L1 (—Å–º. 7.3)
10.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Äú–∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è‚Äù —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º
–î–ª—è L3 –¥–µ–π—Å—Ç–≤–∏–π —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º callback.message.message_id —Å sessions.last_step_message_id.
–ï—Å–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–ª–æ:
‚Ä¢	toast ‚Äú–°—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Äù
‚Ä¢	recover-—Ä–µ–∞–∫—Ü–∏—è:
o	–µ—Å–ª–∏ last_step_sent_at –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ now - last_step_sent_at >= 5 —Å–µ–∫ ‚Üí CONTINUE
o	–∏–Ω–∞—á–µ ‚Üí –æ—Ç–∫—Ä—ã—Ç—å L1
turn/confirm/rc –Ω–∞ —Å—Ç–∞—Ä–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ–º.
–ò—Å–∫–ª—é—á–µ–Ω–∏–µ: –µ—Å–ª–∏ last_step_message_id == null
‚Ä¢	—Ç—Ä–∞–∫—Ç—É–µ–º –∫–∞–∫ ‚Äú–ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞/–ø–æ—Ç–µ—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞‚Äù
‚Ä¢	–≤—ã–ø–æ–ª–Ω–∏—Ç—å CONTINUE –æ–¥–∏–Ω —Ä–∞–∑ –≤—Å–µ–≥–¥–∞ (–∞–Ω—Ç–∏-—Å–ø–∞–º –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
‚Ä¢	–∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É (–Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å turn/rc/confirm –Ω–∞ —Å—Ç–∞—Ä–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏)
10.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ st2
‚Ä¢	st2 –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞—Å—Ç—å —Å session.step
‚Ä¢	–µ—Å–ª–∏ –Ω–µ—Ç:
o	toast ‚Äú–°—Ç–∞—Ä—ã–π —à–∞–≥‚Äù
o	recover –∫–∞–∫ –≤ 10.3
o	–Ω–∏–∫–∞–∫–∏—Ö turn/confirm/rc
10.5. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å turn –∏ –∞–Ω—Ç–∏-—Å–ø–∞–º
–ï—Å–ª–∏ turn –Ω–∞ (session_id, step) —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
‚Ä¢	toast ‚Äú–£–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ‚Äù
‚Ä¢	–µ—Å–ª–∏ now - last_step_sent_at >= 5 —Å–µ–∫ ‚Üí CONTINUE
‚Ä¢	–∏–Ω–∞—á–µ —Ç–æ–ª—å–∫–æ toast
________________________________________
11. L2: –ø–∞–≥–∏–Ω–∞—Ü–∏—è (–≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ)
‚Ä¢	page_size = 10 —Ç–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
‚Ä¢	count = —á–∏—Å–ª–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ–º
‚Ä¢	–µ—Å–ª–∏ count == 0:
o	–ø–æ–∫–∞–∑—ã–≤–∞–µ–º L2-—Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äú–¢–µ–º –ø–æ–∫–∞ –Ω–µ—Ç.‚Äù + inline go:l1 –∏ go:help
o	(–±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ L1 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚Ä¢	last_pg = floor((count - 1) / page_size) –ø—Ä–∏ count > 0
‚Ä¢	–µ—Å–ª–∏ pg2 > last_pg ‚Üí pg2 = last_pg
‚Ä¢	–µ—Å–ª–∏ pg2 < 0 ‚Üí pg2 = 0
–ï—Å–ª–∏ pg2 –≤–∞–ª–∏–¥–µ–Ω —Ñ–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, pg2 —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –ø—Ä–∏ –¥–∏–Ω–∞–º–∏–∫–µ):
‚Ä¢	clamp –∫ last_pg (–∏–ª–∏ 00 –ø—Ä–∏ count=0).
________________________________________
12. –¢–µ–º—ã t:* (happy-path, ACTIVE –∏ ‚Äú—É—Å—Ç–∞—Ä–µ–ª–∞‚Äù)
–ï—Å–ª–∏ ACTIVE –Ω–µ—Ç:
‚Ä¢	tp –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω ‚Üí ‚Äú–¢–µ–º–∞ —É—Å—Ç–∞—Ä–µ–ª–∞.‚Äù + go:l2:
‚Ä¢	tp –≤–∞–ª–∏–¥–µ–Ω ‚Üí —Å–æ–∑–¥–∞—Ç—å ACTIVE –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å L3 (–®–∞–≥ 1)
–ï—Å–ª–∏ ACTIVE –µ—Å—Ç—å:
‚Ä¢	–ø—Ä—è–º–æ–π —Å—Ç–∞—Ä—Ç –∑–∞–ø—Ä–µ—â—ë–Ω
‚Ä¢	–ø–æ t:: —Å–æ–∑–¥–∞—ë–º confirm:new(mode=topic), payload: {topic_id: tp, return_pg: pg2}
‚Ä¢	–ø–æ–∫–∞–∑—ã–≤–∞–µ–º L_CONFIRM
–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª t:* –Ω–∞ —Å—Ç–∞—Ä–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ L2 (–∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ):
‚Ä¢	–ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–∞–∫–æ–µ –∂–µ: –µ—Å–ª–∏ ACTIVE –µ—Å—Ç—å ‚Üí confirm:new(topic); –µ—Å–ª–∏ ACTIVE –Ω–µ—Ç ‚Üí –æ–±—ã—á–Ω—ã–π happy-path/—É—Å—Ç–∞—Ä–µ–ª–∞.
________________________________________
13. L3_TEXT ‚Äú–û—Ç–º–µ–Ω–∞‚Äù
–ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ L3_TEXT:
‚Ä¢	—Å–Ω—è—Ç—å inline —É —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞
‚Äú–û—Ç–º–µ–Ω–∞‚Äù:
‚Ä¢	CONTINUE –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è step
‚Ä¢	—Å—Ç–∞—Ä–æ–µ L3 —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ inline –Ω–∞–≤—Å–µ–≥–¥–∞
Fail-safe:
‚Ä¢	–µ—Å–ª–∏ CONTINUE –Ω–µ —É–¥–∞–ª–æ—Å—å ‚Üí –æ—Ç–∫—Ä—ã—Ç—å L1
________________________________________
14. rc (–ø–µ—Ä–µ—Å–∫–∞–∑) (BLOCKER)
14.1. rc —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ L3 inline
rc –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ inline-–∫–Ω–æ–ø–∫–∞ –Ω–∞ L3 —Å–æ–æ–±—â–µ–Ω–∏–∏. –í–Ω–µ L3 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
14.2. –°—Ç–∞—Ä—ã–π —à–∞–≥/—Å–æ–æ–±—â–µ–Ω–∏–µ
–ï—Å–ª–∏ rc –ø—Ä–∏—à—ë–ª –Ω–∞ —Å—Ç–∞—Ä–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏–ª–∏ —Å—Ç–∞—Ä–æ–º st2:
‚Ä¢	–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ recoverability (10.3/10.4)
14.3. content_hash (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è)
content_hash —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è body —à–∞–≥–∞ (–±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ message_id):
‚Ä¢	base = "theme={theme_id}\n"
‚Ä¢	body = narration (–±–µ–∑ –±–ª–æ–∫–∞ ‚Äú–ü–µ—Ä–µ—Å–∫–∞–∑‚Äù)
‚Ä¢	–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è body:
o	trim
o	replace –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–±–µ–ª–æ–≤/–ø–µ—Ä–µ–Ω–æ—Å–æ–≤ –Ω–∞ –æ–¥–∏–Ω –ø—Ä–æ–±–µ–ª
o	—É–±—Ä–∞—Ç—å –º–∞—Ä–∫–¥–∞—É–Ω/HTML-—Ç–µ–≥–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
–•—ç—à = sha256(base + body_norm).
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
‚Ä¢	step –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ hash, –ø–æ—Ç–æ–º—É —á—Ç–æ step —É–∂–µ –µ—Å—Ç—å –≤ UNIQUE-–∫–ª—é—á–µ ui_events.
14.4. –ü–æ–∫–∞–∑ rc –∏ —Ñ–∏–∫—Å–∞—Ü–∏—è ui_events
–ù–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏:
1.	–≤—ã—á–∏—Å–ª–∏—Ç—å content_hash
2.	ui_event_acquire (—Å–º. 4.5.1)
o	shown ‚Üí toast ‚Äú–ü–µ—Ä–µ—Å–∫–∞–∑ —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω‚Äù –∏ —Å—Ç–æ–ø
o	pending ‚Üí toast ‚Äú–ü–µ—Ä–µ—Å–∫–∞–∑ —É–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è‚Äù –∏ —Å—Ç–æ–ø
o	acquired pending ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
3.	–ø–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ—Å–∫–∞–∑:
o	–ø–æ–ø—ã—Ç–∞—Ç—å—Å—è editMessageText (–¥–æ–ø–∏—Å–∞—Ç—å –±–ª–æ–∫ ‚Äú‚Äî –ü–µ—Ä–µ—Å–∫–∞–∑ ‚Äî ‚Ä¶‚Äù)
o	–µ—Å–ª–∏ edit –Ω–µ —É–¥–∞–ª—Å—è (–ª–∏–º–∏—Ç/parse/–ø—Ä–æ—á–µ–µ) ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äú‚Äî –ü–µ—Ä–µ—Å–∫–∞–∑ ‚Äî ‚Ä¶‚Äù
4.	–∫—Ä–∏—Ç–µ—Ä–∏–π ‚Äú—É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–∫–∞–∑–∞‚Äù:
o	—É—Å–ø–µ—à–Ω–æ editMessageText –ò–õ–ò —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ–µ recap-—Å–æ–æ–±—â–µ–Ω–∏–µ
5.	—Ñ–∏–∫—Å–∞—Ü–∏—è:
o	—É—Å–ø–µ—Ö ‚Üí ui_event.state=shown, step_message_id=<callback.message.message_id>, recap_message_id=<id –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–ª–∏ null>
o	–ø—Ä–æ–≤–∞–ª ‚Üí ui_event.state=failed, fail_count++, next_retry_at –ø–æ backoff, toast ‚Äú–ù–µ —Å–º–æ–≥ –ø–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ—Å–∫–∞–∑‚Äù
________________________________________
15. fn –∏ confirm (–≥–∏–≥–∏–µ–Ω–∞)
15.1. fn –≤—Å–µ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç confirm
–ù–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º L3 (message_id –∏ st2 —Å–æ–≤–ø–∞–ª–∏):
‚Ä¢	—Å–Ω—è—Ç—å inline —É —Ç–µ–∫—É—â–µ–≥–æ L3 —à–∞–≥–∞
‚Ä¢	–ø–æ–∫–∞–∑–∞—Ç—å L_CONFIRM –æ—Ç–¥–µ–ª—å–Ω—ã–º –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º (InlineKeyboard ‚Äú‚úÖ –î–∞ / ‚ùå –ù–µ—Ç‚Äù)
–ù–∞ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ–º ‚Äî recoverability (10.3/10.4), confirm –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ–º.
15.2. –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è confirm-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ cf:* (y –∏–ª–∏ n, –ª—é–±–æ–π –∏—Å—Ö–æ–¥):
‚Ä¢	–ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–Ω—è—Ç—å inline —É confirm-—Å–æ–æ–±—â–µ–Ω–∏—è (edit reply markup -> None)
‚Ä¢	–µ—Å–ª–∏ edit –Ω–µ —É–¥–∞–ª—Å—è (not found/too old/not modified) ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ —Ä–µ—Ç—Ä–∞–µ–≤.
15.3. Fail-safe –Ω–∞ ‚Äú–ù–µ—Ç/–æ—à–∏–±–∫–∞‚Äù
–ï—Å–ª–∏ ‚Äú–ù–µ—Ç‚Äù –∏–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ:
‚Ä¢	–ø—ã—Ç–∞—Ç—å—Å—è CONTINUE
‚Ä¢	–µ—Å–ª–∏ CONTINUE –Ω–µ —É–¥–∞–ª–æ—Å—å ‚Üí –æ—Ç–∫—Ä—ã—Ç—å L1
________________________________________
16. Confirm: –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ‚Äú—É—Å–ø–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–∏‚Äù (BLOCKER)
–û–ø–µ—Ä–∞—Ü–∏—è = —Ç–æ–ª—å–∫–æ DB-–∏–∑–º–µ–Ω–µ–Ω–∏—è. Telegram UI (–æ—Ç–ø—Ä–∞–≤–∫–∞ —ç–∫—Ä–∞–Ω–æ–≤/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é ‚Äú—É—Å–ø–µ—Ö–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏‚Äù.
–û–±—Ä–∞–±–æ—Ç–∫–∞ cf –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å SELECT ... FOR UPDATE –ø–æ (rid8, tg_id):
1.	–ø—Ä–æ–≤–µ—Ä–∏—Ç—å status=pending
2.	–ø—Ä–æ–≤–µ—Ä–∏—Ç—å TTL (–µ—Å–ª–∏ –∏—Å—Ç—ë–∫ ‚Üí status=expired, –æ—Ç–∫–∞–∑)
3.	–µ—Å–ª–∏ cf:n:
o	status=used, result=no, used_at=now
o	commit
4.	–µ—Å–ª–∏ cf:y:
o	prerequisites (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–º–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
ÔÇß	–µ—Å–ª–∏ fail ‚Üí status=used, result=fail, used_at=now; commit
o	–≤—ã–ø–æ–ª–Ω–∏—Ç—å DB-–æ–ø–µ—Ä–∞—Ü–∏—é –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
ÔÇß	finish: FINISH —Ç–µ–∫—É—â—É—é
ÔÇß	abort: ABORT —Ç–µ–∫—É—â—É—é
ÔÇß	new(mode=menu): FINISH —Ç–µ–∫—É—â—É—é + —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –ù–ï –°–†–ê–ó–£, –∞ –ø–µ—Ä–µ–π—Ç–∏ –≤ L2 (–≤—ã–±–æ—Ä —Ç–µ–º—ã)
ÔÇß	new(mode=topic): FINISH —Ç–µ–∫—É—â—É—é + —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã
o	–µ—Å–ª–∏ DB-–æ–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ ‚Üí status=used, result=yes, used_at=now; commit
–ü–æ—Å–ª–µ commit (best-effort UI follow-up):
‚Ä¢	–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å confirm-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (15.2)
‚Ä¢	–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —ç–∫—Ä–∞–Ω:
o	new(menu): –æ—Ç–∫—Ä—ã—Ç—å L2 go:l2:00
o	new(topic): –æ—Ç–ø—Ä–∞–≤–∏—Ç—å L3 —à–∞–≥ 1 –Ω–æ–≤–æ–π —Ç–µ–º—ã (–µ—Å–ª–∏ —Ç–µ–º–∞ –∏—Å—á–µ–∑–ª–∞ –º–µ–∂–¥—É confirm –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º ‚Üí ‚Äú–¢–µ–º–∞ —É—Å—Ç–∞—Ä–µ–ª–∞‚Äù + go:l2:<return_pg>)
o	finish: –ø–æ–∫–∞–∑–∞—Ç—å L4 —Ñ–∏–Ω–∞–ª
o	abort: –æ—Ç–∫—Ä—ã—Ç—å L1
‚Ä¢	–µ—Å–ª–∏ Telegram API –Ω–µ –¥–∞–ª –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —ç–∫—Ä–∞–Ω:
o	best-effort –æ—Ç–∫—Ä—ã—Ç—å L1 (7.3)
o	–µ—Å–ª–∏ –∏ —ç—Ç–æ –Ω–µ —É–¥–∞–ª–æ—Å—å ‚Üí –ª–æ–≥ + –±–µ–∑ —Ä–µ—Ç—Ä–∞–µ–≤
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:
‚Ä¢	–ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ç–∞–ø –ø–æ—Å–ª–µ DB commit –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é (status —É–∂–µ used)
‚Ä¢	Telegram –æ—à–∏–±–∫–∏ –Ω–µ –æ—Å—Ç–∞–≤–ª—è—é—Ç pending –∏ –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç –ø–æ–≤—Ç–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–π
________________________________________
17. –ú–∞–≥–∞–∑–∏–Ω (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
‚Ä¢	go:shop –≤—ã–±–∏—Ä–∞–µ—Ç WAIT –ø–æ –¥–∞–Ω–Ω—ã–º –æ–ø–ª–∞—Ç –≤ –ë–î (–∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã = –ë–î).
‚Ä¢	shop:buy:
o	–µ—Å–ª–∏ pending invoice —É–∂–µ –µ—Å—Ç—å ‚Üí –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π, –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç—å WAIT
o	–∏–Ω–∞—á–µ —Å–æ–∑–¥–∞—Ç—å invoice –∏ –æ—Ç–∫—Ä—ã—Ç—å WAIT
‚Ä¢	shop:chk:
o	–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏ –æ–±–Ω–æ–≤–∏—Ç—å UI
WAIT (–º–∏–Ω–∏–º—É–º):
‚Ä¢	—Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äú–û–∂–∏–¥–∞—é –æ–ø–ª–∞—Ç—É‚Ä¶‚Äù + –∫–Ω–æ–ø–∫–∏ shop:chk, go:l1.
________________________________________
18. my:last_end (–ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
–ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π FINISHED —Å–µ—Å—Å–∏–∏:
‚Ä¢	—Å–æ–æ–±—â–µ–Ω–∏–µ: ‚Äú–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Å–∫–∞–∑–æ–∫. –ù–∞—á–Ω–∏ –Ω–æ–≤—É—é.‚Äù + go:l2:00
–ï—Å–ª–∏ –µ—Å—Ç—å FINISHED:
‚Ä¢	–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–æ–Ω—Ü–æ–≤–∫–æ–π (L4 ‚Äú–ø—Ä–æ—Å–º–æ—Ç—Ä‚Äù)
‚Ä¢	ACTIVE –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
L4 (–ø—Ä–æ—Å–º–æ—Ç—Ä) –µ—Å–ª–∏ –µ—Å—Ç—å ACTIVE:
‚Ä¢	‚è© –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é (CONTINUE)
‚Ä¢	üè† –ú–µ–Ω—é (go:l1)
‚Ä¢	‚ñ∂ –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é (confirm:new(mode=menu))
________________________________________
19. EntryPoints (–∫–æ–º–∞–Ω–¥—ã)
‚Ä¢	/start: –æ—Ç–∫—Ä—ã—Ç—å L1; –µ—Å–ª–∏ ACTIVE ‚Üí PAUSE_CLEAN
‚Ä¢	/new: –µ—Å–ª–∏ ACTIVE ‚Üí confirm:new(mode=menu), –∏–Ω–∞—á–µ go:l2:00
‚Ä¢	/resume: –µ—Å–ª–∏ ACTIVE ‚Üí CONTINUE, –∏–Ω–∞—á–µ –æ—Ç–∫—Ä—ã—Ç—å L1
‚Ä¢	/help: go:help
‚Ä¢	/shop: go:shop
‚Ä¢	/status: –º–∏–Ω–∏–º—É–º (has_active, step_ui, max_steps). –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–æ–ª—å–∫–æ DEV_MODE.
________________________________________
20. DoD (v1.2)
–î–æ–∫—É–º–µ–Ω—Ç ‚Äú–∏–¥–µ–∞–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ–º—ã–π‚Äù –¥–ª—è MVP, –µ—Å–ª–∏:
‚Ä¢	ui_events –¥–µ–¥—É–ø = UNIQUE(session_id, step, kind, content_hash) + acquire —á–µ—Ä–µ–∑ FOR UPDATE + state pending/shown/failed + stale pending + backoff
‚Ä¢	rc –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –ø–æ—Å–ª–µ CONTINUE –ø—Ä–∏ —Ç–æ–º –∂–µ content_hash (shown –±–ª–æ–∫–∏—Ä—É–µ—Ç)
‚Ä¢	rc race ‚Äú–¥–≤–æ–π–Ω–æ–π —Ç–∞–ø‚Äù –Ω–µ –¥–∞—ë—Ç –¥–≤–æ–π–Ω–æ–≥–æ –ø–æ–∫–∞–∑–∞ (pending –±–ª–æ–∫–∏—Ä—É–µ—Ç)
‚Ä¢	confirm: ‚Äú—É—Å–ø–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–∏‚Äù = DB commit; used –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏; Telegram –æ—à–∏–±–∫–∏ –Ω–µ –æ—Å—Ç–∞–≤–ª—è—é—Ç pending
‚Ä¢	recovery —Ä–µ–∞–ª—å–Ω–æ –¥–µ–ª–∞–µ—Ç CONTINUE –∏–ª–∏ —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç L1 (ReplyKeyboard), –±–µ–∑ ‚Äú–ª–æ–∂–Ω—ã—Ö‚Äù —Å–æ–æ–±—â–µ–Ω–∏–π
‚Ä¢	L2 –ø–∞–≥–∏–Ω–∞—Ü–∏—è –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ, –≤–∫–ª—é—á–∞—è count=0 –∏ clamp
‚Ä¢	deactivation confirm-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã best-effort –∏ –æ—à–∏–±–∫–∏ edit –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
PATCH 10_UX_–¢–µ–ª–µ–≥—Ä–∞–º_–±–æ—Ç–∞.docx
A) –†–∞–∑–¥–µ–ª L1 ‚Äú–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é‚Äù
–ù–ê–ô–¢–ò: –±–ª–æ–∫, –≥–¥–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ L1 / —Ä–∞—Å–∫–ª–∞–¥–∫–∞ ReplyKeyboard.
–î–û–ë–ê–í–ò–¢–¨: –Ω–æ–≤—É—é –∫–Ω–æ–ø–∫—É –∏ —Ä–∞—Å–∫–ª–∞–¥–∫—É —Å—Ç—Ä–æ–∫–∏.
–î–û–ë–ê–í–õ–Ø–ï–ú (—Ñ—Ä–∞–≥–º–µ–Ω—Ç):
‚Ä¢	–í L1 –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É: üß† –ü–æ—á–µ–º—É—á–∫–∞
‚Ä¢	–†–∞—Å–∫–ª–∞–¥–∫–∞ L1 (—Å—Ç—Ä–æ–∫–∞ 1): [‚ñ∂ –ù–∞—á–∞—Ç—å —Å–∫–∞–∑–∫—É, üß† –ü–æ—á–µ–º—É—á–∫–∞]
‚Ä¢	–ü—Ä–∞–≤–∏–ª–æ: –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è == –ª–µ–π–±–ª—É –∫–Ω–æ–ø–∫–∏ L1, —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞ (–∫–∞–∫ —É–∂–µ –ø—Ä–∏–Ω—è—Ç–æ).
B) –†–∞–∑–¥–µ–ª ‚Äú–ü—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞‚Äù (–≥–¥–µ –æ–ø–∏—Å–∞–Ω–æ ‚Äú–ª—é–±–æ–π –∏–Ω–æ–π —Ç–µ–∫—Å—Ç ‚Üí –ø–æ–¥—Å–∫–∞–∑–∫–∞ + –æ—Ç–∫—Ä—ã—Ç—å L1‚Äù)
–ù–ê–ô–¢–ò: –ø—Ä–∞–≤–∏–ª–æ –ø—Ä–æ ‚Äú–ª—é–±–æ–π –∏–Ω–æ–π —Ç–µ–∫—Å—Ç –≤ L1/L2/L5‚Äù.
–î–û–ë–ê–í–ò–¢–¨ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ:
–î–û–ë–ê–í–õ–Ø–ï–ú (1 –∞–±–∑–∞—Ü):
–ò—Å–∫–ª—é—á–µ–Ω–∏–µ: –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ WHY_TEXT (L5.why) –ª—é–±–æ–π —Ç–µ–∫—Å—Ç —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –≤–æ–ø—Ä–æ—Å –∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–æ ‚Äú–Ω–µ–ø–æ–Ω—è—Ç–Ω–æ ‚Üí –ø–æ–¥—Å–∫–∞–∑–∫–∞ + –æ—Ç–∫—Ä—ã—Ç—å L1‚Äù.
C) –ù–æ–≤—ã–π –ø–æ–¥–ø—É–Ω–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è WHY_TEXT (L5.why)
–ù–ê–ô–¢–ò: —Ä–∞–∑–¥–µ–ª L5 / inline-—Å–æ—Å—Ç–æ—è–Ω–∏—è / —Ä–µ–∂–∏–º—ã –≤—Ä–æ–¥–µ help/settings/confirm (–ø–æ —Ç–≤–æ–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ).
–î–û–ë–ê–í–ò–¢–¨ –Ω–æ–≤—ã–π –ø–æ–¥–ø—É–Ω–∫—Ç:
–î–û–ë–ê–í–õ–Ø–ï–ú (–ø–æ–ª–Ω—ã–π –±–ª–æ–∫ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏):
L5.why ‚Äî WHY_TEXT (‚Äúüß† –ü–æ—á–µ–º—É—á–∫–∞‚Äù)
‚Ä¢	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –±—ã—Å—Ç—Ä—ã–π Q&A —Ä–µ–∂–∏–º. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å, –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏.
‚Ä¢	–í—Ö–æ–¥: L1 ‚Üí –∫–Ω–æ–ø–∫–∞ üß† –ü–æ—á–µ–º—É—á–∫–∞.
‚Ä¢	–°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –≤—Ö–æ–¥–µ:
‚Äúüß† –ü–æ—á–µ–º—É—á–∫–∞. –ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å –æ —Ç–æ–º, —á—Ç–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ. –ù–∞–ø–∏—à–∏ –≤–æ–ø—Ä–æ—Å (–º–æ–∂–Ω–æ –ø—Ä–æ–¥–∏–∫—Ç–æ–≤–∞—Ç—å –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏–ª—Å—è —Ç–µ–∫—Å—Ç).‚Äù
‚Ä¢	–ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã:
o	ReplyKeyboard: —É–±—Ä–∞—Ç—å (ReplyKeyboardRemove)
o	InlineKeyboard: –∫–Ω–æ–ø–∫–∞ üè† –ú–µ–Ω—é ‚Üí callback go:l1
‚Ä¢	–í–≤–æ–¥:
o	message.text ‚Üí —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –≤–æ–ø—Ä–æ—Å
o	–ª—é–±–æ–π –Ω–µ-—Ç–µ–∫—Å—Ç (voice/audio/sticker/photo) ‚Üí –æ—Ç–≤–µ—Ç ‚Äú–ü–æ–Ω–∏–º–∞—é —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å. –ü—Ä–æ–¥–∏–∫—Ç—É–π —á–µ—Ä–µ–∑ –¥–∏–∫—Ç–æ–≤–∫—É —Ç–∞–∫, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–æ—Å—å —Ç–µ–∫—Å—Ç–æ–º, –∏–ª–∏ –Ω–∞–ø–∏—à–∏ —Ä—É–∫–∞–º–∏.‚Äù –∏ –æ—Å—Ç–∞—Ç—å—Å—è –≤ WHY_TEXT
‚Ä¢	–û—Ç–≤–µ—Ç (–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–∞—á–µ—Å—Ç–≤–∞):
o	–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–º —Ä–µ–±—ë–Ω–∫—É: –ø—Ä–æ—Å—Ç—ã–µ —Å–ª–æ–≤–∞, –±–µ–∑ —Ç–µ—Ä–º–∏–Ω–æ–≤; –µ—Å–ª–∏ —Ç–µ—Ä–º–∏–Ω –Ω—É–∂–µ–Ω, –æ–±—ä—è—Å–Ω–∏—Ç—å –æ–¥–Ω–∏–º –ø—Ä–æ—Å—Ç—ã–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º.
o	–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å 1 –ø—Ä–∏–º–µ—Ä/–∞–Ω–∞–ª–æ–≥–∏—é –∏ –º—è–≥–∫–∏–π —é–º–æ—Ä.
o	–°—Ç–∏–ª—å: –ª—ë–≥–∫–∏–π –æ–∑–æ—Ä–Ω–æ–π —Ä–∞—Å—Å–∫–∞–∑—á–∏–∫ ‚Äú–≤ –¥—É—Ö–µ –ù–æ—Å–æ–≤–∞‚Äù (–æ–±—ä—è—Å–Ω—è–µ—Ç —Å–ª–æ–∂–Ω–æ–µ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º).
o	–£—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É st:read:kid|adult:
ÔÇß	kid ‚Äî –∫–æ—Ä–æ—á–µ/–ø—Ä–æ—â–µ, 4‚Äì6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
ÔÇß	adult ‚Äî —á—É—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ, 6‚Äì10 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
‚Ä¢	–ú–µ—Ö–∞–Ω–∏–∫–∞ –æ—Ç–≤–µ—Ç–∞ (MVP v0.1):
o	–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã: –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ Q/A (json) + –ø—Ä–æ—Å—Ç–æ–π –º–∞—Ç—á–∏–Ω–≥ –ø–æ keywords/contains.
o	–ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–≥–ª—É—à–∫—É (fallback) –∏ –æ—Å—Ç–∞—Ç—å—Å—è –≤ WHY_TEXT.
‚Ä¢	Fallback (–∑–∞–≥–ª—É—à–∫–∞, –±–µ–∑ LLM):
o	kid: ‚Äú–Ø –Ω–µ —É–≤–µ—Ä–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π —Å–ø—Ä–æ—Å–∏—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É: ‚Äò–ø–æ—á–µ–º—É ‚Ä¶?‚Äô, ‚Äò–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Ä¶?‚Äô, ‚Äò—á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ ‚Ä¶?‚Äô. –ü—Ä–æ —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—ã —Ö–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å: –ø—Ä–æ A –∏–ª–∏ –ø—Ä–æ B?‚Äù
o	adult: ‚Äú–ù–µ —É–≤–µ—Ä–µ–Ω. –£—Ç–æ—á–Ω–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É: ‚Äò–ø–æ—á–µ–º—É ‚Ä¶?‚Äô, ‚Äò–∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–æ ‚Ä¶?‚Äô, ‚Äò—á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ ‚Ä¶?‚Äô. –£—Ç–æ—á–Ω–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç: –≥–¥–µ/–∫–æ–≥–¥–∞/–≤ —á—ë–º –∏–º–µ–Ω–Ω–æ.‚Äù
‚Ä¢	–í—ã—Ö–æ–¥: üè† –ú–µ–Ω—é (go:l1) + –æ—Ç–∫—Ä—ã—Ç—å L1.
‚Ä¢	–ù–µ –ª–æ–º–∞–µ—Ç –∏–≥—Ä—É: –ø—Ä–∏ ACTIVE-—Å–µ—Å—Å–∏–∏ —Å–∫–∞–∑–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å/step –Ω–µ –º–µ–Ω—è—é—Ç—Å—è (PAUSE-–ø–æ–≤–µ–¥–µ–Ω–∏–µ).
________________________________________
PATCH –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.docx (DOC-11 –ø–æ —Å–º—ã—Å–ª—É)
–ù–ê–ô–¢–ò: –¥–µ—Ä–µ–≤–æ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é / –æ–ø–∏—Å–∞–Ω–∏–µ L1.
–î–û–ë–ê–í–ò–¢–¨ –ø—É–Ω–∫—Ç:
–î–û–ë–ê–í–õ–Ø–ï–ú:
‚Ä¢	üß† –ü–æ—á–µ–º—É—á–∫–∞ ‚Äî –±—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º ‚Äú–≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç‚Äù: –æ–±—ä—è—Å–Ω—è—é –ø–æ–Ω—è—Ç–Ω–æ —Ä–µ–±—ë–Ω–∫—É, —Å –ø—Ä–∏–º–µ—Ä–æ–º –∏ –ª—ë–≥–∫–æ–π —à—É—Ç–∫–æ–π. –ù–µ —Å–±–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Å–∫–∞–∑–∫—É.
============================================================
–ü–†–ò–õ–û–ñ–ï–ù–ò–ï U. –¢–µ–º—ã (L2) + –°—Ç–∏–ª–∏ —Ç–µ–∫—Å—Ç–∞ (style_id) (v0.1)
============================================================

L2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "–º–∏—Ä/—Ç–µ–º—É" –¥–ª—è –Ω–æ–≤–æ–π —Å–∫–∞–∑–∫–∏.
–ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–µ–º—ã –≤ L2 —Å–æ–¥–µ—Ä–∂–∏—Ç:
- title ‚Äî —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
- subtitle ‚Äî 1 —Å—Ç—Ä–æ–∫–∞: —á—Ç–æ —ç—Ç–æ –∑–∞ –º–∏—Ä –∏ —á–µ–º –∑–∞–Ω—è—Ç –≥–µ—Ä–æ–π
- style_tag ‚Äî –º–µ—Ç–∫–∞ —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–∏ ("–≤ –¥—É—Ö–µ ...")
- tags ‚Äî 4‚Äì6 —Ç–µ–≥–æ–≤ –∏–∑ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è

–í–æ–∑—Ä–∞—Å—Ç:
- MVP –µ–¥–∏–Ω—ã–π: 4‚Äì10 –ª–µ—Ç
- –±–µ–∑ –≤–µ—Ç–≤–ª–µ–Ω–∏—è/–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤.

–§–æ—Ä–º–∞—Ç –∏—Å—Ç–æ—Ä–∏–∏ (MVP, –∫–æ–Ω—Ç—Ä–∞–∫—Ç intro_3p_plus_choice):
- 3 –∞–±–∑–∞—Ü–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è (—Ü–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç, –±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∞–±–∑–∞—Ü–∞)
- –∑–∞—Ç–µ–º –æ–¥–∏–Ω –≤—ã–±–æ—Ä:
  –ê) ...
  –ë) ...
  –í) ...
  –°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç: ______

–í—ã–±–æ—Ä –≥–µ—Ä–æ—è (protagonist_mode):
- kid   ‚Äî "—Ç—ã" (–∏–ª–∏ "—è" –≤ —Å—Ç–∏–ª—è—Ö –æ—Ç 1-–≥–æ –ª–∏—Ü–∞ —Ä–µ–±—ë–Ω–∫–∞)
- known ‚Äî –∏–∑–≤–µ—Å—Ç–Ω—ã–π –≥–µ—Ä–æ–π/–ø–µ—Ä—Å–æ–Ω–∞–∂, –ø–æ–¥—Ö–æ–¥—è—â–∏–π –º–∏—Ä—É —Ç–µ–º—ã
- auto  ‚Äî –ò–ò –≤—ã–±–∏—Ä–∞–µ—Ç –≥–µ—Ä–æ—è —Å–∞–º

–¢–µ–≥–∏:
- tags –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ —Å–ª–æ–≤–∞—Ä—è content/tag_vocab.yaml
- –≤ —Ç–µ–º–µ 4‚Äì6 —Ç–µ–≥–æ–≤, –±–µ–∑ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –∏ –¥—É–±–ª–µ–π

–°—Ç–∏–ª–∏:
- style_id –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ content/styles.yaml
- –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç–∏–ª—å –Ω–µ –≤—ã–±–∏—Ä–∞–µ—Ç, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è theme.style_default

starter_prompt (starter_brief):
- –ù–ï —è–≤–ª—è–µ—Ç—Å—è –≥–æ—Ç–æ–≤—ã–º —Ç–µ–∫—Å—Ç–æ–º –Ω–∞—á–∞–ª–∞.
- –≠—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π brief-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞: "–∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫ ‚Äî –Ω–æ–≤–æ–µ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ".
- –î–µ—Ç–∞–ª–∏ –º–∏—Ä–∞ –∑–∞–¥–∞—é—Ç—Å—è —è–∫–æ—Ä—è–º–∏/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏, –∞ –Ω–µ –≥–æ—Ç–æ–≤–æ–π —Å—Ü–µ–Ω–æ–π.

SOURCE OF TRUTH:
- content/themes.yaml
- content/styles.yaml
- content/tag_vocab.yaml
- docs/GEN_CONTRACT.md


PATCH v1.2 (–≤—Å—Ç–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞)
–î–∞—Ç–∞: 2026-01-20
–ü—Ä–∏—á–∏–Ω–∞: –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º ‚Äúüß† –ü–æ—á–µ–º—É—á–∫–∞‚Äù (WHY_TEXT / L5.why) + –∑–∞–∫—Ä—ã—Ç—å BLOCKER –ø–æ –≤–ª–∞–¥–µ–Ω–∏—é —Å–µ—Å—Å–∏–∏ (tg_id) –∏ —Å—Ö–µ–º–µ session_events.
________________________________________
PATCH-A: L1 ‚Äú–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é‚Äù ‚Äî –Ω–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ üß† –ü–æ—á–µ–º—É—á–∫–∞
–ì–¥–µ: —Ä–∞–∑–¥–µ–ª L1 ‚Äú–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é‚Äù (–∫–Ω–æ–ø–∫–∏ + —Ä–∞—Å–∫–ª–∞–¥–∫–∞ ReplyKeyboard)
–î–æ–±–∞–≤–∏—Ç—å:
‚Ä¢	–í L1 –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É: üß† –ü–æ—á–µ–º—É—á–∫–∞
‚Ä¢	–†–∞—Å–∫–ª–∞–¥–∫–∞ L1 (—Å—Ç—Ä–æ–∫–∞ 1): [‚ñ∂ –ù–∞—á–∞—Ç—å —Å–∫–∞–∑–∫—É, üß† –ü–æ—á–µ–º—É—á–∫–∞]
‚Ä¢	–ü—Ä–∞–≤–∏–ª–æ: –µ—Å–ª–∏ message.text == –ª–µ–π–±–ª—É –∫–Ω–æ–ø–∫–∏ L1, —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞ (–∫–∞–∫ —É–∂–µ –ø—Ä–∏–Ω—è—Ç–æ)
________________________________________
PATCH-B: –ü—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ ‚Äî –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è WHY_TEXT (L5.why)
–ì–¥–µ: —Ä–∞–∑–¥–µ–ª ‚Äú–ü—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞‚Äù (–≥–¥–µ –æ–ø–∏—Å–∞–Ω–æ ‚Äú–ª—é–±–æ–π –∏–Ω–æ–π —Ç–µ–∫—Å—Ç ‚Üí –ø–æ–¥—Å–∫–∞–∑–∫–∞ + –æ—Ç–∫—Ä—ã—Ç—å L1‚Äù)
–î–æ–±–∞–≤–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ (1 –∞–±–∑–∞—Ü):
‚Ä¢	–ò—Å–∫–ª—é—á–µ–Ω–∏–µ: –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ WHY_TEXT (L5.why) –ª—é–±–æ–π message.text —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –≤–æ–ø—Ä–æ—Å –∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–æ ‚Äú–Ω–µ–ø–æ–Ω—è—Ç–Ω–æ ‚Üí –ø–æ–¥—Å–∫–∞–∑–∫–∞ + –æ—Ç–∫—Ä—ã—Ç—å L1‚Äù.
________________________________________
PATCH-C: –ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ L5.why ‚Äî WHY_TEXT (‚Äúüß† –ü–æ—á–µ–º—É—á–∫–∞‚Äù)
–ì–¥–µ: —Ä–∞–∑–¥–µ–ª L5 / inline-—Å–æ—Å—Ç–æ—è–Ω–∏—è / —Ä–µ–∂–∏–º—ã (—Ä—è–¥–æ–º —Å help/settings/confirm)
–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–π –±–ª–æ–∫ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:
L5.why ‚Äî WHY_TEXT (‚Äúüß† –ü–æ—á–µ–º—É—á–∫–∞‚Äù)
‚Ä¢	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –±—ã—Å—Ç—Ä—ã–π Q&A —Ä–µ–∂–∏–º. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å, –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏.
‚Ä¢	–í—Ö–æ–¥: L1 ‚Üí –∫–Ω–æ–ø–∫–∞ üß† –ü–æ—á–µ–º—É—á–∫–∞.
‚Ä¢	–°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –≤—Ö–æ–¥–µ:
‚Äúüß† –ü–æ—á–µ–º—É—á–∫–∞. –ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å –æ —Ç–æ–º, —á—Ç–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ. –ù–∞–ø–∏—à–∏ –≤–æ–ø—Ä–æ—Å (–º–æ–∂–Ω–æ –ø—Ä–æ–¥–∏–∫—Ç–æ–≤–∞—Ç—å –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏–ª—Å—è —Ç–µ–∫—Å—Ç).‚Äù
‚Ä¢	–ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã:
o	ReplyKeyboard: —É–±—Ä–∞—Ç—å (ReplyKeyboardRemove)
o	InlineKeyboard: –∫–Ω–æ–ø–∫–∞ üè† –ú–µ–Ω—é ‚Üí callback go:l1
‚Ä¢	–í–≤–æ–¥:
o	message.text ‚Üí —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –≤–æ–ø—Ä–æ—Å
o	–ª—é–±–æ–π –Ω–µ-—Ç–µ–∫—Å—Ç (voice/audio/sticker/photo/video) ‚Üí –æ—Ç–≤–µ—Ç:
‚Äú–ü–æ–Ω–∏–º–∞—é —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å. –ü—Ä–æ–¥–∏–∫—Ç—É–π —á–µ—Ä–µ–∑ –¥–∏–∫—Ç–æ–≤–∫—É —Ç–∞–∫, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–æ—Å—å —Ç–µ–∫—Å—Ç–æ–º, –∏–ª–∏ –Ω–∞–ø–∏—à–∏ —Ä—É–∫–∞–º–∏.‚Äù
–∏ –æ—Å—Ç–∞—Ç—å—Å—è –≤ WHY_TEXT
‚Ä¢	–û—Ç–≤–µ—Ç (–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–∞—á–µ—Å—Ç–≤–∞):
o	–ü–æ–Ω—è—Ç–Ω–æ —Ä–µ–±—ë–Ω–∫—É: –ø—Ä–æ—Å—Ç—ã–µ —Å–ª–æ–≤–∞, –±–µ–∑ —Ç–µ—Ä–º–∏–Ω–æ–≤; –µ—Å–ª–∏ —Ç–µ—Ä–º–∏–Ω –Ω—É–∂–µ–Ω, –æ–±—ä—è—Å–Ω–∏—Ç—å –æ–¥–Ω–∏–º –ø—Ä–æ—Å—Ç—ã–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º.
o	–í–∫–ª—é—á–∏—Ç—å 1 –ø—Ä–∏–º–µ—Ä/–∞–Ω–∞–ª–æ–≥–∏—é –∏ –º—è–≥–∫–∏–π —é–º–æ—Ä.
o	–°—Ç–∏–ª—å: –ª—ë–≥–∫–∏–π –æ–∑–æ—Ä–Ω–æ–π —Ä–∞—Å—Å–∫–∞–∑—á–∏–∫ ‚Äú–≤ –¥—É—Ö–µ –ù–æ—Å–æ–≤–∞‚Äù.
o	–£—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É st:read:kid|adult:
ÔÇß	kid ‚Äî –∫–æ—Ä–æ—á–µ/–ø—Ä–æ—â–µ, 4‚Äì6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
ÔÇß	adult ‚Äî —á—É—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ, 6‚Äì10 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
‚Ä¢	–ú–µ—Ö–∞–Ω–∏–∫–∞ –æ—Ç–≤–µ—Ç–∞ (MVP v0.1, –±–µ–∑ LLM):
o	–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã: –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ Q/A (json) + –ø—Ä–æ—Å—Ç–æ–π –º–∞—Ç—á–∏–Ω–≥ (keywords/contains).
o	–ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback (–∑–∞–≥–ª—É—à–∫—É) –∏ –æ—Å—Ç–∞—Ç—å—Å—è –≤ WHY_TEXT.
‚Ä¢	Fallback (–∑–∞–≥–ª—É—à–∫–∞, –±–µ–∑ LLM):
o	kid: ‚Äú–Ø –Ω–µ —É–≤–µ—Ä–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π —Å–ø—Ä–æ—Å–∏—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É: ‚Äò–ø–æ—á–µ–º—É ‚Ä¶?‚Äô, ‚Äò–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Ä¶?‚Äô, ‚Äò—á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ ‚Ä¶?‚Äô. –ü—Ä–æ —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—ã —Ö–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å: –ø—Ä–æ A –∏–ª–∏ –ø—Ä–æ B?‚Äù
o	adult: ‚Äú–ù–µ —É–≤–µ—Ä–µ–Ω. –£—Ç–æ—á–Ω–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É: ‚Äò–ø–æ—á–µ–º—É ‚Ä¶?‚Äô, ‚Äò–∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–æ ‚Ä¶?‚Äô, ‚Äò—á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ ‚Ä¶?‚Äô. –£—Ç–æ—á–Ω–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç: –≥–¥–µ/–∫–æ–≥–¥–∞/–≤ —á—ë–º –∏–º–µ–Ω–Ω–æ.‚Äù
‚Ä¢	–í—ã—Ö–æ–¥: üè† –ú–µ–Ω—é (go:l1) + –æ—Ç–∫—Ä—ã—Ç—å L1 (—Å–º. –ø—Ä–∞–≤–∏–ª–æ ‚Äú–û—Ç–∫—Ä—ã—Ç—å L1‚Äù).
‚Ä¢	–ù–µ –ª–æ–º–∞–µ—Ç –∏–≥—Ä—É: –ø—Ä–∏ ACTIVE-—Å–µ—Å—Å–∏–∏ —Å–∫–∞–∑–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å/step –Ω–µ –º–µ–Ω—è—é—Ç—Å—è (PAUSE-–ø–æ–≤–µ–¥–µ–Ω–∏–µ).
________________________________________
PATCH-D: –ó–∞–∫—Ä—ã—Ç—å –Ω–µ—Å–æ—Å—Ç—ã–∫–æ–≤–∫—É ‚Äú–≤–ª–∞–¥–µ–ª–µ—Ü —Å–µ—Å—Å–∏–∏ tg_id‚Äù (BLOCKER)
–ü—Ä–æ–±–ª–µ–º–∞: —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ ‚Äú–≥—Ä—É–∑–∏–º –ø–æ (tg_id, sid8)‚Äù –µ—Å—Ç—å, –Ω–æ tg_id –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ sessions.
–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ (–≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è):
‚Ä¢	–í–∞—Ä–∏–∞–Ω—Ç A (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è MVP): –¥–æ–±–∞–≤–∏—Ç—å sessions.tg_id –∫–∞–∫ –ø–æ–ª–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞.
‚Ä¢	–í–∞—Ä–∏–∞–Ω—Ç B: sessions —Ö—Ä–∞–Ω–∏—Ç user_id, –∞ tg_id —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ users; —Ç–æ–≥–¥–∞ ‚Äú–≥—Ä—É–∑–∏–º –ø–æ (tg_id, sid8)‚Äù –æ–∑–Ω–∞—á–∞–µ—Ç JOIN sessions‚Üíusers –∏ —Ñ–∏–ª—å—Ç—Ä –ø–æ users.tg_id.
–ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞: –∑–∞–ø—Ä–µ—â–µ–Ω–æ –≥—Ä—É–∑–∏—Ç—å —Å–µ—Å—Å–∏—é –ø–æ sid8 –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ tg_id.
________________________________________
PATCH-E: –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å turn –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∞ —Å—Ö–µ–º–æ–π (BLOCKER)
–î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞–∑–¥–µ–ª –ø—Ä–æ session_events:
‚Ä¢	session_events –æ–±—è–∑–∞–Ω–∞ –∏–º–µ—Ç—å UNIQUE(session_id, step), –∏–Ω–∞—á–µ ‚Äú1 turn –Ω–∞ —à–∞–≥‚Äù –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –¥—É–±–ª—è—Ö –∞–ø–¥–µ–π—Ç–æ–≤.
PATCH: DB schema v0.1 (TG.3.2.01)
–î–∞—Ç–∞: 2026-01-22
–ö–≤–µ—Å—Ç: TG.3.2.01 ‚Äî ‚Äú–°–Ω–∞—á–∞–ª–∞ —Å—Ö–µ–º–∞: SQL –º–∏–≥—Ä–∞—Ü–∏–∏‚Äù
–°—Ç–∞—Ç—É—Å: DONE
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ Postgres –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ runtime-—Å–µ—Å—Å–∏–π –∏–∑ –ø–∞–º—è—Ç–∏ –≤ –ë–î –∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è recoverability/–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ UX (Telegram-–¥—É–±–ª–∏, –¥–≤–æ–π–Ω—ã–µ –∫–ª–∏–∫–∏, stale inline).
–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (Git)
‚Ä¢	–ö–∞–Ω–æ–Ω —Å—Ö–µ–º—ã (–ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç): packages/db/SCHEMA_v0_1.md (–µ—Å–ª–∏ —Ñ–∞–π–ª–∞ –µ—â—ë –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–≤–µ—Å—Ç–æ–º docs(db))
‚Ä¢	SQL –º–∏–≥—Ä–∞—Ü–∏—è (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è): packages/db/migrations/001_init_schema_v0_1.sql
‚Ä¢	–û—Ç—á—ë—Ç/–∏–Ω–¥–µ–∫—Å —Ñ–∞–∫—Ç–∞: reports/OPS_DB_TON.md, reports/IMPLEMENTATION_INDEX.md
–°–æ—Å—Ç–∞–≤ —Ç–∞–±–ª–∏—Ü v0.1 (–º–∏–Ω–∏–º—É–º –∂–∏–∑–Ω–µ–Ω–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ UX)
1.	users
–•—Ä–∞–Ω–∏—Ç Telegram-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è.
‚Ä¢	–∫–ª—é—á: tg_id (unique)
‚Ä¢	–∏–º—è –æ–±—Ä–∞—â–µ–Ω–∏—è: display_name
‚Ä¢	—Å–ø—Ä–∞–≤–æ—á–Ω–æ: tg_username
‚Ä¢	–ø–ª–∞–Ω/–¥–∞—Ç—ã: plan, plan_started_at, plan_expires_at
2.	sessions
–•—Ä–∞–Ω–∏—Ç —Å–µ—Å—Å–∏—é —Å–∫–∞–∑–∫–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å.
‚Ä¢	–∞–¥—Ä–µ—Å–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏: sid8 (short id)
‚Ä¢	–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: —Ç–æ–ª—å–∫–æ –ø–æ (tg_id, sid8)
‚Ä¢	–¥–µ–¥—É–ø/–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: last_step_message_id, last_step_sent_at
‚Ä¢	–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç UX: –Ω–µ –±–æ–ª–µ–µ –æ–¥–Ω–æ–π ACTIVE —Å–µ—Å—Å–∏–∏ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (enforced partial unique index)
‚Ä¢	expires_at –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ TTL/–∞—Ä—Ö–∏–≤, –Ω–µ –∫–∞–∫ –±–∏–∑–Ω–µ—Å-—Å—Ç–∞—Ç—É—Å
‚Ä¢	player_name —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ sessions –∫–∞–∫ —Å–Ω–∞–ø—à–æ—Ç users.display_name –∏ –¥–∞–ª–µ–µ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
3.	session_events
–ñ—É—Ä–Ω–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ö–æ–¥–æ–≤ (—Ç–æ–ª—å–∫–æ user-turn).
‚Ä¢	–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç: UNIQUE(session_id, step) (–∑–∞—â–∏—Ç–∞ –æ—Ç Telegram-–¥—É–±–ª–µ–π –Ω–∞ —à–∞–≥–µ)
4.	payments
–ü–ª–∞—Ç–µ–∂–∏/–∏–Ω–≤–æ–π—Å—ã.
‚Ä¢	invoice_id unique
‚Ä¢	kind (v0.1: SUB_MONTH)
‚Ä¢	period_yyyymm –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è kind=SUB_MONTH + status=CONFIRMED
5.	confirm_requests
–û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å confirm).
‚Ä¢	rid8 unique
‚Ä¢	lookup: —Ç–æ–ª—å–∫–æ –ø–æ (tg_id, rid8)
‚Ä¢	–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å: (tg_id, rid8)
‚Ä¢	–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: PENDING/USED/EXPIRED + result/used_at (–æ–ø–∏—Å–∞–Ω–æ –≤ –∫–∞–Ω–æ–Ω–µ)
6.	usage_windows
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–ø–∞–º–∞/—Ä–∞—Å—Ö–æ–¥–æ–≤ —Ç–æ–∫–µ–Ω–æ–≤ (rolling –æ–∫–Ω–æ 12 —á–∞—Å–æ–≤).
‚Ä¢	–ª–∏–º–∏—Ç—ã v0.1: messages_used <= 150, sessions_started <= 20 –Ω–∞ 12 —á–∞—Å–æ–≤
‚Ä¢	‚Äú–æ–¥–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ–µ –æ–∫–Ω–æ‚Äù –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–º upsert –≤ –∫–æ–¥–µ
7.	ui_events
–î–µ–¥—É–ø –∏ –¥–æ—Å—Ç–∞–≤–∫–∞ UI-—Å–æ–±—ã—Ç–∏–π (recap_shown –∏ —Ç.–ø.).
‚Ä¢	—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å: (session_id, step, kind, content_hash)
‚Ä¢	content_hash —Ñ–æ—Ä–º–∞—Ç: sha256:<hex>
‚Ä¢	–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: state=PENDING => pending_since NOT NULL
‚Ä¢	–∏–Ω–¥–µ–∫—Å –¥–ª—è —Ä–µ—Ç—Ä–∞–µ–≤: (state, next_retry_at)
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ UX
–ù–∞–ª–∏—á–∏–µ ui_events –∏ confirm_requests –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
‚Ä¢	–¥—É–±–ª–∏ –∞–ø–¥–µ–π—Ç–æ–≤ –∏ –¥–≤–æ–π–Ω—ã–µ –∫–ª–∏–∫–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É ‚Äú–ø–µ—Ä–µ—Å–∫–∞–∑—É‚Äù –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ confirm;
‚Ä¢	–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ tg_id.
PATCH 3 ‚Äî 10_UX_–¢–µ–ª–µ–≥—Ä–∞–º_–±–æ—Ç–∞.docx (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –ª—É—á—à–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å)
–ö—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å: –≤ —Ä–∞–∑–¥–µ–ª ‚Äú–ú–∞–≥–∞–∑–∏–Ω/–û–ø–ª–∞—Ç–∞/–ü—Ä–µ–º–∏—É–º‚Äù –∏–ª–∏ ‚Äú–ü–æ—Å–ª–µ MVP‚Äù (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å).
–ï—Å–ª–∏ UX-–¥–æ–∫ –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–æ —Ç–µ–∫—É—â–∏–µ —ç–∫—Ä–∞–Ω—ã MVP ‚Äî –≤—Å—Ç–∞–≤—å –∫–∞–∫ ‚ÄúNOT IN MVP‚Äù –±–ª–æ–∫.
–ß—Ç–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å:
Not in MVP v0.1 (UX-backlog)
‚Ä¢	–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è: —ç–∫—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–µ–±—ë–Ω–∫–∞ + –º–µ—Ç–∫–∞ ‚Äú–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å–∫–∞–∑–∫–∞‚Äù.
‚Ä¢	–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ: –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ (–æ–±—ã—á–Ω—ã–π / —Å–µ–º–µ–π–Ω—ã–π) + –ø—Ä–∞–≤–∏–ª–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è/–æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏.
‚Ä¢	–ü–µ—á–∞—Ç—å: —ç–∫—Ä–∞–Ω ‚Äú–ó–∞–∫–∞–∑–∞—Ç—å –∫–Ω–∏–≥—É‚Äù –ø–æ—Å–ª–µ PDF, —Å —Ä–∞—Å—á—ë—Ç–æ–º –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –∞–¥—Ä–µ—Å–æ–º (–≤–Ω–µ MVP).
________________________________________
–ú–æ—è –æ—Ü–µ–Ω–∫–∞ (—á—Ç–æ–±—ã –Ω–µ –¥–µ–ª–∞—Ç—å –≤–∏–¥, —á—Ç–æ –≤—Å—ë –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤–∞–∂–Ω–æ)
‚Ä¢	–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è = –ª—É—á—à–∏–π ROI –∏–∑ —Ç—Ä—ë—Ö (–º–∏–Ω–∏–º—É–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –º–∞–∫—Å–∏–º—É–º ‚Äú–≤–∞—É‚Äù).
‚Ä¢	–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ = —Å–∏–ª—å–Ω–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–≥–æ UX.
‚Ä¢	–ü–µ—á–∞—Ç—å = —Ä–µ–¥–∫–∏–µ –ø–æ–∫—É–ø–∫–∏, –Ω–æ –±–æ–ª—å—à–æ–π —á–µ–∫, –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ PDF.
10.PATCH.IMG_UX ‚Äî UX: –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π –∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è (UX Canon v0.2)
–°—Ç–∞—Ç—É—Å: ACTIVE
–î–∞—Ç–∞: 2026-01-28
–û–±–ª–∞—Å—Ç—å: Telegram UX / message composition / error states

1) –û–±—â–∏–π –ø—Ä–∏–Ω—Ü–∏–ø
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —à–∞–≥ –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: —Ç–µ–∫—Å—Ç + –≤–∞—Ä–∏–∞–Ω—Ç—ã (–∫–Ω–æ–ø–∫–∏). –ï—Å–ª–∏ –µ—Å—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∞ ‚Äî –æ–Ω–∞ –ø—Ä–∏–∫–ª–µ–∏–≤–∞–µ—Ç—Å—è –∫ —à–∞–≥—É, –Ω–æ –Ω–µ –º–µ–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞.
–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤—ã–±–æ—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–±–ª–æ–∫ "–í–∞—Ä–∏–∞–Ω—Ç—ã: A) ... B) ... C) ..."), –∞ inline-–∫–Ω–æ–ø–∫–∏ –≤—Å–µ–≥–¥–∞ –∫–æ—Ä–æ—Ç–∫–∏–µ A/B/C –∏ –ø–µ—Ä–µ–¥–∞—é—Ç choice_id –∏–∑ LLM choices[].

2) –ï—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞
- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º PHOTO (–∫–∞—Ä—Ç–∏–Ω–∫–∞)
- –í caption: narration (—Ç–µ–∫—Å—Ç —à–∞–≥–∞, –∫–∞–∫ –æ–±—ã—á–Ω–æ)
- –ü–æ–¥ —Ñ–æ—Ç–æ: inline-–∫–Ω–æ–ø–∫–∏ choices A/B/C (–∏ —Å–≤–æ–±–æ–¥–Ω—ã–π –≤–≤–æ–¥, –µ—Å–ª–∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω UX-–∫–∞–Ω–æ–Ω–æ–º)
–í–∞–∂–Ω–æ: –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å ‚Äú–∫–∞—Ä—Ç–∏–Ω–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ, —Ç–µ–∫—Å—Ç –æ—Ç–¥–µ–ª—å–Ω–æ‚Äù –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –®–∞–≥ –¥–æ–ª–∂–µ–Ω —á–∏—Ç–∞—Ç—å—Å—è –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ.

3) –ï—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ù–ï —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ (–ø–æ—Å–ª–µ retry=1)
- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±—ã—á–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å narration
- –ö–Ω–æ–ø–∫–∏ choices –∫–∞–∫ –æ–±—ã—á–Ω–æ
- –ù–∏–∫–∞–∫–∏—Ö ‚Äú–æ—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏‚Äù –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫—Ä–æ–º–µ –º—è–≥–∫–æ–≥–æ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–Ω–æ –∏–≥—Ä–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è).

4) –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ UX-—Å–æ–±—ã—Ç–∏—è
–í —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏/–ª–æ–≥–∞—Ö —Ñ–∏–∫—Å–∏—Ä—É–µ–º:
- needs_image=true|false
- image_outcome=ok|failed|skipped
- retry_count (0|1)
–ù–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —ç—Ç–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º.
